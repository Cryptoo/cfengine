body file control

{

  namespace => "cryptoo";

  inputs => {
              "cryptoo/config/directory_names.cf",
              "cryptoo/config/file_names.cf"
            };

}

bundle common templates

{

  vars:

    any::

      "template_list"
        slist => {
                    "cf_execd",
                    "cf_monitord",
                    "cf_serverd",
                    "crypttab",
                    "dmcrypt",
                    "dracut_conf",
                    "env_cryptoo",
                    "env_kernel",
                    "env_locale",
                    "fstab",
                    "guest_role",
                    "ini",
                    "ipset_service",
                    "local_layout_conf",
                    "local_repo_name",
                    "machine_names",
                    "make_conf",
                    "networks",
                    "profile_parent",
                    "serial_autologin",
                    "shorewall_service",
                    "site_config",
                    "site_repo_name",
                    "subnets",
                    "world_sets",
                 };

      "template[$(template_list)]"
        string => ifelse("local_template_$(template_list)", "$(cryptoo:directory_names.fs_volatile_local_templates)/$(cryptoo:file_names.template_$(template_list))",
                         "!local_template_$(template_list)", "$(cryptoo:directory_names.fs_volatile_cf_templates)/$(cryptoo:file_names.template_$(template_list))",
                         "missing");

  classes:

    any::

      "local_template_$(template_list)"
        expression => fileexists("/$(cryptoo:directory_names.fs_volatile_local_templates)/$(cryptoo:file_names.template_$(template_list))");

}
